<!DOCTYPE HTML>
<html
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.thymeleaf.org"
 	layout:decorate="@{layouts/base}">

<nav layout:fragment="navigation"
	class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
	<a class="navbar-brand" href="#">Payments tool</a>
	<button class="navbar-toggler" type="button" data-toggle="collapse"
		data-target="#navbarsExampleDefault"
		aria-controls="navbarsExampleDefault" aria-expanded="false"
		aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>

	<div class="collapse navbar-collapse" id="navbarsExampleDefault">
		<ul class="navbar-nav mr-auto">
			<li class="nav-item active"><a class="nav-link" href="#">Card
					payments <span class="sr-only">(current)</span>
			</a></li>
			<li class="nav-item"><a class="nav-link" href="#">Alternative
					payments</a></li>
		</ul>
	</div>
</nav>

<div class="container" layout:fragment="content">
	<h1 class="mt-5">Credit Card Payment Flow</h1>

	<div class="card text-center">
		<div class="card-header">
			<ul class="nav nav-tabs card-header-tabs">
				<li class="nav-item"><a class="nav-link card-link active"
					href="#" data-card="card1"> 1: Payment Form</a></li>
				<li class="nav-item"><a class="nav-link card-link disabled"
					href="#" data-card="card2"> 2: Create a Token</a></li>
				<li class="nav-item"><a class="nav-link card-link disabled"
					href="#" data-card="card3"> 3: Send to back-end</a></li>
				<li class="nav-item"><a class="nav-link card-link disabled"
					href="#" data-card="card4"> 4: 3D Secure Redirect</a></li>
			</ul>
		</div>
		<div class="card-body p-4 text-left">
			<div class="card-content" th:insert="card_payments/form" id="card1"></div>
			<div class="card-content" id="card2">
				<div class="row">
					<div class="col-sm-12">
						<h4>URL</h4>
						<code>POST {tokenization_service_url}/card_token</code>
						<p />
					</div>
				</div>
				<div class="row">
					<div class="col-sm-6">
						<h4>Request body</h4>
						<pre>
							<code class="json formatted-code-block"
								id="tokenization_request_text">
							</code>
						</pre>
					</div>
					<div class="col-sm-6">
						<h4>Response body</h4>
						<pre>
							<code class="json formatted-code-block"
								id="tokenization_response_text">
							</code>
						</pre>
					</div>
				</div>
				<div class="container">
					<hr />
				</div>
				<div class="row">
					<div class="offset-sm-8 col-sm-4">
						<button class="subscribe btn btn-primary btn-block" id="proceed_to_payment" type="button">
							Proceed to payment &gt;</button>
					</div>
				</div>
			</div>
			<div class="card-content" id="card3">
				<div class="row">
					<div class="col-sm-12"> 
						<h4>URL</h4>
						<code>POST {payments_service_url}/credit_card_payments/charges</code>
						<p />
					</div>
				</div>
				
				<div class="container">
					<h3>Charge Request</h3>
					<pre>
						<code class="json formatted-code-block"
							id="payment_request_text">
						</code>
					</pre>
				</div>
				
				<div class="row">
					<div class="col-sm-8" id="payment_attempts_header">
						<h4>Payment Attempts</h4>
						<hr />
					</div>
					<div class="col-sm-4" id="attempted_gateways_header">
						<h4>Attempted Gateways</h4>
						<hr />
					</div>
				</div>
			</div>
			<div class="card-content" id="card4">Card Content 4</div>		
		</div>
	</div>
</div>

<div layout:fragment="scripts">
	<script type="text/javascript"
		src="webjars/jquery/3.3.1-1/jquery.min.js"></script>
	<script type="text/javascript"
		src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/esm/popper.min.js"></script>
	<script type="text/javascript"
		src="webjars/bootstrap/4.1.0/js/bootstrap.min.js"></script>
	<script
		src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>

	<script type="text/javascript" th:src="@{/js/card_payments/index.js}"></script>
	<script type="text/javascript" th:src="@{/js/vendor/faker.min.js}"></script>
	<script type="text/javascript"
		th:src="@{/js/vendor/credit_cards_generator.js}"></script>
	<script type="text/javascript"
		th:src="@{/js/vendor/uuidv4_generator.js}"></script>
	<script type="text/javascript"
		th:src="@{/js/configuration/integration.js}"></script>
	<script type="text/javascript"
		th:src="@{/js/factories/tokenizationRequestFactory.js}"></script>
	<script type="text/javascript"
		th:src="@{/js/factories/paymentRequestFactory.js}"></script>
</div>